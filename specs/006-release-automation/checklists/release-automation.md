# Release Automation Checklist: GitHub リリース自動化

**Purpose**: リリース自動化の仕様品質を検証する（アーキテクチャリポジトリ固有機能）
**Created**: 2026-02-08
**Feature**: [spec.md](../spec.md)
**Scope**: アーキテクチャリポジトリのみ。リリース ZIP 展開後の開発リポジトリには影響しない。

**Note**: This checklist is generated by the `/speckit.checklist` command based on feature context and requirements.

## Requirement Completeness

- [ ] CHK001 リリースコマンド実行の前提条件（main ブランチ、リモートプッシュ権限）は FR として明文化されているか？現在は Edge Cases に「未定義（警告を出すことが望ましい）」とあるが、FR としての要件が不足している [Gap, Edge Cases §5]
- [ ] CHK002 タグプッシュ後のワークフロー失敗時（ZIP 作成失敗、gh release create 失敗等）のリカバリ手順は仕様に定義されているか？ [Gap, Exception Flow]
- [ ] CHK003 バージョンインクリメント後の `package.json` のフォーマット保持要件（インデント、末尾改行等）は定義されているか？ [Gap]
- [ ] CHK004 リリースコマンドのエラーメッセージの内容・形式は FR-002 で具体的に規定されているか？「エラーメッセージを表示して中断」のみで、メッセージ内容が不明 [Clarity, Spec §FR-002]
- [ ] CHK005 ワークフローが `contents: write` 以外の GitHub Actions 権限を必要としないことは仕様に明記されているか？ [Gap, Security]

## Requirement Clarity

- [ ] CHK006 FR-006 の「除外パターンと一致させ」の「一致」は厳密に定義されているか？ディレクトリ除外とファイル除外で OS 間の差異（Windows パス区切り vs Unix）は考慮されているか？ [Clarity, Spec §FR-006]
- [ ] CHK007 FR-009 の「パッチバージョンを自動的にインクリメント」は PATCH のみに限定されることが明確か？MAJOR/MINOR は Out of Scope に記載があるが、FR-009 自体に制約が明記されていない [Clarity, Spec §FR-009]
- [ ] CHK008 FR-010 の「CI を再トリガーしないよう制御」の具体的なメカニズム（`[skip ci]` 等）は仕様レベルで規定すべきか、実装詳細として plan に委ねるべきか？ [Clarity, Spec §FR-010]
- [ ] CHK009 SC-001 の「人手を介さず完了する」の範囲は明確か？リリースコマンドの実行自体は人手だが、それ以降が自動という意味か？ [Ambiguity, Spec §SC-001]

## Requirement Consistency

- [ ] CHK010 User Story 1 の Acceptance Scenario 1 では `v0.1.0` を例としているが、現在の `package.json` は `1.0.4` である。仕様内の例示バージョンは最新の実態と整合しているか？ [Consistency, Spec §US-1]
- [ ] CHK011 FR-006 と FR-012 は両方とも除外パターンに言及しているが、責務の境界は明確か？（FR-006 は CI 側、FR-012 はローカル側と読めるが明記されていない） [Consistency, Spec §FR-006, §FR-012]
- [ ] CHK012 Assumptions に「リリースは main ブランチからのみ行う」とあるが、Edge Cases では「main ブランチ以外でリリースコマンドを実行した場合の動作は未定義」としている。Assumption と Edge Case の扱いに矛盾はないか？ [Conflict, Assumptions vs Edge Cases §5]

## Acceptance Criteria Quality

- [ ] CHK013 SC-002 の「ZIP 内容が一致する」は客観的に検証可能な基準が定義されているか？ファイル一覧の一致か、バイナリ一致か？ [Measurability, Spec §SC-002]
- [ ] CHK014 SC-004 の「CI が再トリガーされない」は検証方法が仕様で定義されているか？ [Measurability, Spec §SC-004]
- [ ] CHK015 SC-001 の「人手を介さず完了する」のタイムアウト要件は定義されているか？ワークフローが無限にハングした場合の成功/失敗判定 [Measurability, Spec §SC-001]

## Scenario Coverage

- [ ] CHK016 リリースコマンド実行時にローカルに未コミットの変更がある場合の動作要件は定義されているか？ [Coverage, Gap]
- [ ] CHK017 リリースコマンド実行時にリモートとローカルの main が分岐している場合の動作要件は定義されているか？ [Coverage, Gap]
- [ ] CHK018 複数の開発者が同時にリリースコマンドを実行した場合の排他制御要件は定義されているか？ [Coverage, Gap]
- [ ] CHK019 ワークフローのバージョンインクリメント・プッシュが失敗した場合、GitHub Release は作成済みだが package.json は未更新という中間状態の対処要件は定義されているか？ [Coverage, Exception Flow]

## スコープ境界（アーキテクチャリポジトリ固有）

- [ ] CHK020 リリース ZIP にリリース自動化関連ファイル（`release.yml`, `create-release-tag.ps1`）が含まれないことは FR-006 で十分にカバーされているか？ [Completeness, Spec §FR-006]
- [ ] CHK021 ZIP 展開後の開発リポジトリで `pnpm release` コマンドが存在しても無害であること（GitHub Actions がなければ何も起きない）は仕様で考慮されているか？ [Coverage, Gap]
- [ ] CHK022 `scripts/` ディレクトリ全体が ZIP から除外されるため、`create-release-tag.ps1` は自然に除外される。この暗黙の除外は仕様で明記されているか？ [Clarity, Spec §FR-006]

## Dependencies & Assumptions

- [ ] CHK023 GitHub Actions の `gh` CLI がランナーにプリインストールされている前提は Assumptions セクションに記載されているか？ [Assumption, Gap]
- [ ] CHK024 `github.token` の権限スコープが `contents: write` で十分であることは検証済みの前提としてドキュメントされているか？ [Assumption, Gap]
- [ ] CHK025 Node.js のバージョン要件（CI ランナーと `package.json` の `engines` フィールドの整合性）は仕様に含まれているか？ [Dependency, Gap]

## Notes

- 全 25 項目。アーキテクチャリポジトリ固有のスコープ制約を反映
- CHK001, CHK012, CHK019 は仕様の Gap/Conflict として優先度が高い
- CHK020〜CHK022 はユーザー指定の「ZIP 展開後の開発リポジトリでは不要」制約に基づく項目
