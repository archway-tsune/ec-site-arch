# Research: リリースZIP展開後のナビゲーション制御

## R-001: ナビゲーション制御の方式

**Decision**: レイアウトファイル内の `navLinks` 配列を空（またはダッシュボードのみ）にし、ドメイン実装時に開発者が行を追加する方式

**Rationale**: 現在の `navLinks` はレイアウトファイル内にハードコードされた配列であり、最もシンプルな変更はこの配列の初期値を変えること。外部設定ファイルやランタイム検出は不要な複雑さを追加する。コメントで追加例を残すことで、ドメイン実装時の手順が明確になる。

**Alternatives considered**:
- ランタイムでルートの存在を検出: Next.js App Router ではファイルシステムベースのルーティングのため、ランタイム検出が複雑。ビルド時の静的解析も同様
- 外部設定ファイル（nav-config.ts 等）: ファイルが増え、変更箇所が分散する。レイアウトファイル内で完結するほうがシンプル

## R-002: E2Eテストへの影響

**Decision**: E2Eテストに変更不要

**Rationale**: E2Eテストはサンプル実装が存在する状態で実行される。サンプルの `src/app/(buyer)/layout.tsx` と `src/app/admin/layout.tsx` はサンプルドメインの全リンクを含むため、E2Eテストの期待値と一致する。ZIP展開後はサンプルが削除され、空の navLinks が使用されるが、その状態ではE2Eテスト自体が対象外となる。

**Alternatives considered**:
- navLinks の変更に合わせてE2Eテストも修正: 不要。サンプル実装環境でのテストなのでリンクは全表示される

## R-003: ドキュメント入力例の更新方針

**Decision**: `docs/examples/` の各 spec 入力例に、ナビゲーションリンク追加を実装手順の一部として記載する

**Rationale**: 新規ドメイン実装時に `/speckit.plan` の入力としてナビゲーション追加が自然に含まれるようにする。constitution-example.md の実装ワークフローにも反映する。
